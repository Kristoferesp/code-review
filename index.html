<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador Financeiro B치sico</title>
    <style>
        /* --- CSS --- */
        :root {
            --primary: #3b82f6;
            --success: #2ecc71;
            --danger: #e74c3c;
            --light: #f3f4f6;
            --dark: #1f2937;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; }

        body { background-color: var(--light); display: flex; justify-content: center; padding: 20px; }

        .container { background: white; width: 100%; max-width: 500px; padding: 25px; border-radius: 12px; box-shadow: 0 10px 15px rgba(0,0,0,0.1); }

        h2 { text-align: center; margin-bottom: 20px; color: var(--dark); }

        /* Dashboard de Valores */
        .dashboard { display: flex; justify-content: space-between; margin-bottom: 25px; gap: 10px; }
        .card { flex: 1; text-align: center; padding: 15px; border-radius: 8px; background: #fff; border: 1px solid #eee; }
        .card h4 { font-size: 11px; text-transform: uppercase; color: #777; margin-bottom: 5px; }
        .card p { font-size: 16px; font-weight: bold; }
        
        .money-plus { color: var(--success); }
        .money-minus { color: var(--danger); }
        .balance-total { color: var(--dark); }

        /* Lista de Transa칞칫es */
        h3 { border-bottom: 2px solid var(--light); padding-bottom: 8px; margin: 20px 0 10px; font-size: 18px; }
        
        .list { list-style-type: none; margin-bottom: 30px; max-height: 250px; overflow-y: auto; }
        .list li { background-color: #fff; border: 1px solid #f1f1f1; border-radius: 6px; color: var(--dark); display: flex; justify-content: space-between; padding: 12px; margin-bottom: 8px; position: relative; transition: transform 0.2s; }
        .list li.plus { border-left: 6px solid var(--success); }
        .list li.minus { border-left: 6px solid var(--danger); }
        
        .delete-btn { cursor: pointer; background-color: var(--danger); border: 0; color: #fff; font-size: 10px; padding: 5px 8px; border-radius: 4px; margin-left: 10px; }

        /* Formul치rio */
        .form-control { margin-bottom: 12px; }
        label { display: block; margin-bottom: 6px; font-weight: 600; font-size: 14px; color: #444; }
        input, select { border: 1px solid #ddd; border-radius: 6px; display: block; font-size: 15px; padding: 12px; width: 100%; outline: none; }
        input:focus { border-color: var(--primary); }
        
        .btn { cursor: pointer; background-color: var(--primary); color: #fff; border: 0; display: block; font-size: 16px; margin-top: 20px; padding: 12px; width: 100%; border-radius: 6px; font-weight: bold; }
        .btn:hover { background-color: #2563eb; }
    </style>
</head>
<body>

    <div class="container">
        <h2>游눯 Meu Simulador</h2>

        <!-- Resumo -->
        <div class="dashboard">
            <div class="card">
                <h4>Entradas</h4>
                <p id="money-plus" class="money-plus">+ R$ 0,00</p>
            </div>
            <div class="card">
                <h4>Sa칤das</h4>
                <p id="money-minus" class="money-minus">- R$ 0,00</p>
            </div>
            <div class="card">
                <h4>Saldo</h4>
                <p id="balance" class="balance-total">R$ 0,00</p>
            </div>
        </div>

        <!-- Lista -->
        <h3>Hist칩rico</h3>
        <ul id="list" class="list"></ul>

        <!-- Formul치rio -->
        <h3>Nova Transa칞칚o</h3>
        <form id="form">
            <div class="form-control">
                <label>Descri칞칚o</label>
                <input type="text" id="text" placeholder="Ex: Sal치rio, Mercado..." required />
            </div>
            <div class="form-control">
                <label>Valor (R$)</label>
                <input type="number" id="amount" placeholder="0,00" step="0.01" required />
            </div>
            <div class="form-control">
                <label>Tipo</label>
                <select id="type">
                    <option value="receita">Receita (+)</option>
                    <option value="despesa">Despesa (-)</option>
                </select>
            </div>
            <button class="btn">Adicionar</button>
        </form>
    </div>

    <script>
        /* --- JAVASCRIPT --- */
        const balance = document.getElementById('balance');
        const money_plus = document.getElementById('money-plus');
        const money_minus = document.getElementById('money-minus');
        const list = document.getElementById('list');
        const form = document.getElementById('form');
        const text = document.getElementById('text');
        const amount = document.getElementById('amount');
        const typeSelect = document.getElementById('type');

        // Carregar dados do LocalStorage ou iniciar vazio
        const localStorageTransactions = JSON.parse(localStorage.getItem('transactions'));
        let transactions = localStorage.getItem('transactions') !== null ? localStorageTransactions : [];

        // Adicionar Transa칞칚o
        form.addEventListener('submit', (e) => {
            e.preventDefault();

            const transaction = {
                id: Math.floor(Math.random() * 1000000),
                text: text.value,
                amount: typeSelect.value === 'despesa' ? -Math.abs(amount.value) : Math.abs(amount.value),
                type: typeSelect.value
            };

            transactions.push(transaction);
            updateLocalStorage();
            init();

            text.value = '';
            amount.value = '';
        });

        // Remover Transa칞칚o
        function removeTransaction(id) {
            transactions = transactions.filter(t => t.id !== id);
            updateLocalStorage();
            init();
        }

        // Atualizar interface
        function init() {
            list.innerHTML = '';
            transactions.forEach(addTransactionDOM);
            updateValues();
        }

        // Adicionar item na lista (HTML)
        function addTransactionDOM(transaction) {
            const cssClass = transaction.amount < 0 ? 'minus' : 'plus';
            const item = document.createElement('li');

            item.classList.add(cssClass);
            item.innerHTML = `
                ${transaction.text} <span>${formatCurrency(transaction.amount)}</span>
                <button class="delete-btn" onclick="removeTransaction(${transaction.id})">x</button>
            `;

            list.appendChild(item);
        }

        // Calcular Saldo, Receitas e Despesas
        function updateValues() {
            const amounts = transactions.map(t => t.amount);
            
            const total = amounts.reduce((acc, item) => (acc += item), 0).toFixed(2);
            
            const income = amounts
                .filter(item => item > 0)
                .reduce((acc, item) => (acc += item), 0)
                .toFixed(2);

            const expense = (
                amounts.filter(item => item < 0).reduce((acc, item) => (acc += item), 0) * -1
            ).toFixed(2);

            balance.innerText = formatCurrency(total);
            money_plus.innerText = `+ ${formatCurrency(income)}`;
            money_minus.innerText = `- ${formatCurrency(expense)}`;
        }

        function formatCurrency(value) {
            return Number(value).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
        }

        function updateLocalStorage() {
            localStorage.setItem('transactions', JSON.stringify(transactions));
        }

        init();
    </script>
</body>
</html>